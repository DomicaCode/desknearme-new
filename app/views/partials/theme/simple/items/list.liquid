{% liquid
  assign statuses = 'published,unavailable' | split: ','
  assign query = query | default: context.params
  function items = 'lib/queries/items/search', params: query, limit: 21, statuses: statuses, lang: lang, only_public: true
  function filters = 'lib/queries/search/filters', query: items.query

  render 'theme/simple/search_canonical_url', query: items.query
  render 'theme/simple/items/index', items: items, filters: filters, current_profile: current_profile
  render 'theme/simple/wishlists/enable_event', current_profile_id: current_profile.id
%}
